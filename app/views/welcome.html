<div class="jumbotron">
  <canvas id="testCanvas"></canvas>
  <h1>Welcome!</h1>
  <h2 class="lead">Browse events created by other users or create your own.</h2>
</div>

<div class="row events-list">
  <div class="col-xs-12">
    <h4>Current events</h4>
    <ul class="events list-group">
      <li class="list-group-item" ng-repeat="meetUpEvent in meetUpEvents | orderBy:orderBy">
        <div ng-click="collapsed=!collapsed" class="header">
            <h4><strong>{{ meetUpEvent.name }}</strong></h4><p> host: {{ meetUpEvent.host}}</p>
          <!-- delete a message using $remove -->
          <span class="small" ng-if="checkUid(meetUpEvent.uidOfuser)">(your event)</span>
          <div class="actions">
            <a ui-sref="edit-event({ eventData: meetUpEvent })" ng-if="checkUid(meetUpEvent.uidOfuser)">Edit</a>
            <a href="" ng-click="meetUpEvents.$remove(meetUpEvent)"  ng-if="checkUid(meetUpEvent.uidOfuser)" class="remove">Delete</a>
            <i ng-class="collapsed?'open':'closed';" class="glyphicon glyphicon-menu-down"></i>
          </div>
        </div>
          <div  ng-show="collapsed" class="event-details">
            <p><strong>Start:</strong> {{meetUpEvent.timeStartString}},  {{meetUpEvent.dateStartString}}</p>
            <p><strong>End:</strong> {{meetUpEvent.timeEndString}},  {{meetUpEvent.dateEndString}}</p>
            <p><strong>type of activity:</strong> {{meetUpEvent.type}}</p>
            <p><strong>Event notes:</strong> {{meetUpEvent.message}}</p>
            <h5><strong>Address:</strong></h5>
            <p ng-repeat="text in meetUpEvent.address">{{text}}</p>
        </div>
      </li>
    </ul>
  </div>
</div>
<script>
  var canvas;
  var context;
  var proton;
  var renderer;
  var emitter;
//  var stats;
  var colors;

  Main();
  function Main() {
    colors = ['#529B88', '#CDD180', '#FFFA32', '#FB6255', '#FB4A53', '#FF4E50', '#F9D423'];
    canvas = document.getElementById("testCanvas");
    canvas.width = 1003;
    canvas.height = 610;
    context = canvas.getContext('2d');
    context.globalCompositeOperation = "darker";
//    addStats();
    createProton();
    tick();
  }
//  function addStats() {
//    stats = new Stats();
//    stats.setMode(2);
//    stats.domElement.style.position = 'absolute';
//    stats.domElement.style.left = '0px';
//    stats.domElement.style.top = '0px';
//    document.getElementById('container').appendChild(stats.domElement);
//  }
  function createProton() {
    proton = new Proton;
    emitter = new Proton.Emitter();
    emitter.rate = new Proton.Rate(new Proton.Span(3, 6), new Proton.Span(.05, .2));
    emitter.addInitialize(new Proton.Mass(1));
    emitter.addInitialize(new Proton.Radius(20, 200));
    emitter.addInitialize(new Proton.Life(2, 4));
    emitter.addInitialize(new Proton.Position(new Proton.RectZone(0, 0, canvas.width, canvas.height)));
    emitter.addBehaviour(new Proton.Alpha(0, 1, Infinity, Proton.easeOutCubic));
    emitter.addBehaviour(new Proton.Scale(1, 0, Infinity, Proton.easeOutCubic));
    emitter.addBehaviour(new Proton.Color(colors, 'random'));
    emitter.emit();
    proton.addEmitter(emitter);
    renderer = new Proton.Renderer('canvas', proton, canvas);
    renderer.start();
  }
  function tick() {
    requestAnimationFrame(tick);
//    stats.begin();
    proton.update();
//    stats.end();
  }
</script>
